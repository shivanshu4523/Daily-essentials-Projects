<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather App</title>
  <link rel="stylesheet" href="style123.css">
  <script src="script.js" defer></script>
  <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
</head>

<body>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');

/* Global styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Roboto', sans-serif;
}

/* Body styling */
body {
  background: linear-gradient(135deg, #e0eafc, #cfdef3);
  color: #333;
}

/* Header styling */
h1 {
  background: #4a90e2;
  font-size: 2.2rem;
  text-align: center;
  padding: 25px 0;
  color: #fff;
  border-bottom: 6px solid #357abd;
  border-radius: 0 0 20px 20px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

/* Container styling */
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding: 20px;
  max-width: 1200px;
  margin: auto;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
}

/* Input section styling */
.weather-input {
  background: #ffffff;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 500px;
  text-align: center;
  position: relative;
}

/* Input field styling */
.weather-input input {
  height: 50px;
  width: calc(100% - 20px);
  outline: none;
  font-size: 1rem;
  padding: 0 15px;
  margin: 10px 0;
  border-radius: 5px;
  border: 1px solid #dcdcdc;
  transition: border-color 0.3s, box-shadow 0.3s;
}

.weather-input input:focus {
  border-color: #4a90e2;
  box-shadow: 0 0 8px rgba(74, 144, 226, 0.5);
}

/* Separator styling */
.weather-input .separator {
  height: 1px;
  width: 100%;
  margin: 20px 0;
  background: #e0e0e0;
  position: relative;
}

.weather-input .separator::before {
  content: "or";
  color: #999;
  font-size: 1rem;
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  background: #ffffff;
  padding: 0 10px;
  border-radius: 5px;
}

/* Button styling */
.weather-input button {
  width: 100%;
  padding: 12px 0;
  cursor: pointer;
  border: none;
  border-radius: 5px;
  font-size: 1rem;
  color: #fff;
  background: #4a90e2;
  transition: background 0.3s, transform 0.3s, box-shadow 0.3s;
  position: relative;
}

.weather-input button:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 5px;
  transition: opacity 0.3s;
  opacity: 0;
}

.weather-input button:hover {
  background: #357abd;
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

.weather-input button:hover:before {
  opacity: 1;
}

.weather-input .location-btn {
  background: #6c757d;
}

.weather-input .location-btn:hover {
  background: #5a6268;
}

/* Weather data styling */
.weather-data {
  width: 100%;
  font-size: 1.5rem;
}

.weather-data .current-weather {
  background: #ffffff;
  color: #333;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
}

/* Current weather icon styling */
.current-weather .icon {
  text-align: center;
}

.current-weather .icon img {
  max-width: 100px;
  margin-top: -10px;
  transition: transform 0.3s;
}

.current-weather .icon img:hover {
  transform: rotate(360deg);
}

.current-weather .icon h6 {
  margin-top: 5px;
  text-transform: capitalize;
}

#card {
  font-size: 1.5rem;
}

.weather-cards {
  font-size: 1.5rem;
}

/* Forecast section styling */
.days-forecast h2 {
  margin: 20px 0;
  font-size: 1.6rem;
  color: #4a90e2;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
}

.days-forecast .weather-cards {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

/* Individual weather card styling */
.weather-cards .card {
  background: #ffffff;
  color: #333;
  padding: 20px;
  list-style: none;
  width: calc(100% / 5 - 15px);
  border-radius: 10px;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
  text-align: center;
  transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
}

.weather-cards .card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
  background: #f7f7f7;
}

/* Card heading styling */
.weather-cards .card h3 {
  font-size: 1.2rem;
  font-weight: 500;
}

/* Card icon image styling */
.weather-cards .card img {
  max-width: 80px;
  margin: 10px 0;
  transition: transform 0.3s;
}

.weather-cards .card img:hover {
  transform: scale(1.1);
}

.weather-data .current-weather .details h2 {
  font-size: 1.5rem;
}

.weather-cards .card h3 {
  font-size: 1.2rem;
  font-weight: 600;
  color: #357abd;
}

.details h2 {
  color: #357abd;
}

/* Responsive styling */
@media (max-width: 1200px) {
  .weather-cards .card {
    width: calc(100% / 3 - 15px);
  }
}

@media (max-width: 800px) {
  .weather-cards .card {
    width: calc(100% / 2 - 15px);
  }
}

@media (max-width: 500px) {
  .weather-cards .card {
    width: 100%;
  }

  .weather-input {
    max-width: 100%;
    padding: 15px;
  }
}
    </style>
  <header>
    <h1>Weather Dashboard</h1>
  </header>
  <main class="container">
    <section class="weather-input">
      <h3>Find Weather Information</h3>
      <div class="input-group">
        <input class="city-input" type="text" placeholder="E.g., Delhi, Lucknow, Ghaziabad, ...">
        <button class="search-btn">Search</button>
      </div>
      <div class="or-divider">
        <br>
        <p>------------------------ or ------------------------</p>
        <br>
      </div>
      <button class="location-btn">Use My Location</button>
    </section>
    <section class="weather-data">
      <div class="current-weather">
        <div class="details" id="card">
          <h2>City Name (Date)</h2>
          <h6>Temperature: __°C</h6>
          <h6><box-icon name='wind'></box-icon> Wind: __ M/S</h6>
          <h6><box-icon name='water'></box-icon> Humidity: __%</h6>
        </div>
      </div>
      <div class="days-forecast">
        <h2>5-Day Weather Forecast</h2>
        <ul class="weather-cards">
          <li class="card">
            <h3>Date</h3>
            <h6>Temp: __°C</h6>
            <h6><box-icon name='wind'></box-icon> Wind: __ M/S</h6>
            <h6><box-icon name='water'></box-icon> Humidity: __%</h6>
          </li>
          <li class="card">
            <h3>Date</h3>
            <h6>Temp: __°C</h6>
            <h6><box-icon name='wind'></box-icon> Wind: __ M/S</h6>
            <h6><box-icon name='water'></box-icon> Humidity: __%</h6>
          </li>
          <li class="card">
            <h3>Date</h3>
            <h6>Temp: __°C</h6>
            <h6><box-icon name='wind'></box-icon> Wind: __ M/S</h6>
            <h6><box-icon name='water'></box-icon> Humidity: __%</h6>
          </li>
          <li class="card">
            <h3>Date</h3>
            <h6>Temp: __°C</h6>
            <h6><box-icon name='wind'></box-icon> Wind: __ M/S</h6>
            <h6><box-icon name='water'></box-icon> Humidity: __%</h6>
          </li>
          <li class="card">
            <h3>Date</h3>
            <h6>Temp: __°C</h6>
            <h6><box-icon name='wind'></box-icon> Wind: __ M/S</h6>
            <h6><box-icon name='water'></box-icon> Humidity: __%</h6>
          </li>
        </ul>
      </div>
    </section>
  </main>

  <script>
    const cityInput = document.querySelector(".city-input");
const searchButton = document.querySelector(".search-btn");
const locationButton = document.querySelector(".location-btn");
const currentWeatherDiv = document.querySelector(".current-weather");
const weatherCardsDiv = document.querySelector(".weather-cards");

const API_KEY = "5b28361e4d3a1189171fd090155607ac"; 

// Function to get day name from a date
const getDayName = (dateString) => {
    const date = new Date(dateString);
    const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    return days[date.getDay()];
}

// Create weather card with custom image paths
const createWeatherCard = (cityName, weatherItem, index) => {
    const date = new Date(weatherItem.dt_txt);
    const formattedDate = `${getDayName(weatherItem.dt_txt)}, ${date.getDate()}/${date.getMonth() + 1}`;

    // Define custom weather icons based on weather code
    const weatherIcons = {
        "01d": "images/sun.png",
        "01n": "images/moon.png",
        "02d": "images/cloudy-day.png",
        "02n": "images/cloudy.png",
        "03d": "images/cloudy-day.png",
        "03n": "images/cloudy..png",
        "04d": "images/broken-clouds.png",
        "04n": "images/broken-clouds.png",
        "09d": "images/showers.png",
        "09n": "images/showers.png",
        "10d": "images/rain.png",
        "10n": "images/rain.png",
        "11d": "images/thunderstorm.png",
        "11n": "images/thunderstorm.png",
        "13d": "images/snow.png",
        "13n": "images/snow.png",
        "50d": "images/mist.png",
        "50n": "images/mist.png"
    };

    // Retrieve the icon based on the weather code
    const weatherCode = weatherItem.weather[0].icon;
    const iconPath = weatherIcons[weatherCode] || "images/default.png"; 

    if (index === 0) { // Main weather card
        return `
            <div class="details">
                <h2>${cityName} (${formattedDate})</h2>
                <h6>Temperature: ${(weatherItem.main.temp - 273.15).toFixed(2)}°C</h6>
                <h6>Wind: ${weatherItem.wind.speed} M/S</h6>
                <h6>Humidity: ${weatherItem.main.humidity}%</h6>
            </div>
            <div class="icon">
                <img src="${iconPath}" alt="weather-icon">
                <h6>${weatherItem.weather[0].description}</h6>
            </div>`;
    } else { // Forecast card
        return `
            <li class="card">
                <h3>${formattedDate}</h3>
                <img src="${iconPath}" alt="weather-icon">
                <h6>Temp: ${(weatherItem.main.temp - 273.15).toFixed(2)}°C</h6>
                <h6>Wind: ${weatherItem.wind.speed} M/S</h6>
                <h6>Humidity: ${weatherItem.main.humidity}%</h6>
            </li>`;
    }
}

// Fetch weather details based on coordinates
const getWeatherDetails = (cityName, latitude, longitude) => {
    const WEATHER_API_URL = `https://api.openweathermap.org/data/2.5/forecast?lat=${latitude}&lon=${longitude}&appid=${API_KEY}`;

    fetch(WEATHER_API_URL).then(response => response.json()).then(data => {
        const uniqueForecastDays = [];
        const fiveDaysForecast = data.list.filter(forecast => {
            const forecastDate = new Date(forecast.dt_txt).getDate();
            if (!uniqueForecastDays.includes(forecastDate)) {
                return uniqueForecastDays.push(forecastDate);
            }
        });

        // Clear previous weather data
        cityInput.value = "";
        currentWeatherDiv.innerHTML = "";
        weatherCardsDiv.innerHTML = "";

        // Create and display weather cards
        fiveDaysForecast.forEach((weatherItem, index) => {
            const html = createWeatherCard(cityName, weatherItem, index);
            if (index === 0) {
                currentWeatherDiv.insertAdjacentHTML("beforeend", html);
            } else {
                weatherCardsDiv.insertAdjacentHTML("beforeend", html);
            }
        });
    }).catch(() => {
        alert("Error fetching weather data. Please try again later.");
    });
}

// Fetch city coordinates based on input
const getCityCoordinates = () => {
    const cityName = cityInput.value.trim();
    if (cityName === "") return;
    const API_URL = `https://api.openweathermap.org/geo/1.0/direct?q=${cityName}&limit=1&appid=${API_KEY}`;

    fetch(API_URL).then(response => response.json()).then(data => {
        if (!data.length) return alert(`No data found for ${cityName}. Please try another city.`);
        const { lat, lon, name } = data[0];
        getWeatherDetails(name, lat, lon);
    }).catch(() => {
        alert("Error fetching city coordinates. Please check your input or try again later.");
    });
}

// Fetch user coordinates and corresponding weather data
const getUserCoordinates = () => {
    navigator.geolocation.getCurrentPosition(
        position => {
            const { latitude, longitude } = position.coords;
            const API_URL = `https://api.openweathermap.org/geo/1.0/reverse?lat=${latitude}&lon=${longitude}&limit=1&appid=${API_KEY}`;
            fetch(API_URL).then(response => response.json()).then(data => {
                const { name } = data[0];
                getWeatherDetails(name, latitude, longitude);
            }).catch(() => {
                alert("Error fetching city from coordinates. Please try again.");
            });
        },
        error => {
            if (error.code === error.PERMISSION_DENIED) {
                alert("Location permission denied. Please enable location services and try again.");
            } else {
                alert("Error retrieving location. Please try again later.");
            }
        }
    );
}

// Event listeners
locationButton.addEventListener("click", getUserCoordinates);
searchButton.addEventListener("click", getCityCoordinates);
cityInput.addEventListener("keyup", e => e.key === "Enter" && getCityCoordinates());

  </script>
</body>

</html>